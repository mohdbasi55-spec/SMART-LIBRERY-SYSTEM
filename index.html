<!DOCTYPE html>
<html>
<head>
    <title>College Library - Advanced Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); padding: 30px; border-radius: 20px; text-align: center; color: white; margin-bottom: 30px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0; }
        .stat-card { background: rgba(255,255,255,0.2); padding: 25px; border-radius: 15px; text-align: center; }
        .stat-number { font-size: 2.5em; font-weight: bold; color: #fff; }
        .search-box { background: rgba(255,255,255,0.9); padding: 20px; border-radius: 15px; margin: 30px 0; }
        input { width: 100%; padding: 15px; border: none; border-radius: 10px; font-size: 16px; }
        .books-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .book-card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.2); transition: transform 0.3s; }
        .book-card:hover { transform: translateY(-5px); }
        .book-image { height: 200px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; font-size: 3em; }
        .book-info { padding: 20px; }
        .status { padding: 8px 15px; border-radius: 20px; font-weight: bold; font-size: 12px; }
        .available { background: #d4edda; color: #155724; }
        .issued { background: #f8d7da; color: #721c24; }
        .overdue { background: #fff3cd; color: #856404; }
        .btn { padding: 12px 24px; border: none; border-radius: 25px; cursor: pointer; font-weight: bold; margin: 5px; transition: all 0.3s; }
        .btn-primary { background: #3498db; color: white; }
        .btn-success { background: #27ae60; color: white; }
        .btn-danger { background: #e74c3c; color: white; }
        .analytics { background: rgba(255,255,255,0.1); padding: 30px; border-radius: 20px; margin: 30px 0; }
        canvas { max-height: 300px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ“š College Library Dashboard</h1>
            <p>UniShelf Advanced | Real-time Book Tracking</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="totalBooks">1,247</div>
                <div>Books</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="issuedBooks">89</div>
                <div>Issued Today</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="overdueBooks">12</div>
                <div>Overdue</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="activeUsers">156</div>
                <div>Active Users</div>
            </div>
        </div>

        <div class="search-box">
            <input type="text" id="searchInput" placeholder="ðŸ” Search books, authors, ISBN...">
        </div>

        <div class="analytics">
            <h3>ðŸ“Š Today's Activity</h3>
            <canvas id="activityChart" width="400" height="200"></canvas>
        </div>

        <div class="books-grid" id="booksGrid">
            <!-- Books populated by JavaScript -->
        </div>
    </div>

    <script>
        // Sample data (connects to UniShelf API in production)
        const booksData = [
            {id:1, title:"LibreOffice Writer Guide", author:"LibreOffice Team", isbn:"978-1-234567-89-0", copies:5, available:5, status:"available"},
            {id:2, title:"Calc Manual", author:"LibreOffice Team", isbn:"978-1-234567-90-6", copies:3, available:1, status:"issued"},
            {id:3, title:"Impress Presentation", author:"LibreOffice Team", isbn:"978-1-234567-91-3", copies:4, available:0, status:"overdue"},
            {id:4, title:"Base Database Guide", author:"LibreOffice Team", isbn:"978-1-234567-92-0", copies:2, available:2, status:"available"}
        ];

        // Real-time stats
        function updateStats() {
            document.getElementById('totalBooks').textContent = booksData.reduce((sum, b) => sum + b.copies, 0);
            document.getElementById('issuedBooks').textContent = booksData.filter(b => b.status !== 'available').length;
            document.getElementById('overdueBooks').textContent = booksData.filter(b => b.status === 'overdue').length;
            document.getElementById('activeUsers').textContent = Math.floor(Math.random() * 200) + 100;
        }

        // Render books
        function renderBooks(books) {
            const grid = document.getElementById('booksGrid');
            grid.innerHTML = books.map(book => `
                <div class="book-card">
                    <div class="book-image">ðŸ“–</div>
                    <div class="book-info">
                        <h3>${book.title}</h3>
                        <p>by ${book.author} | ISBN: ${book.isbn}</p>
                        <span class="status ${book.status}">${book.available}/${book.copies} Available</span>
                        <br>
                        <button class="btn btn-${book.status === 'available' ? 'success' : 'danger'} issue-btn" 
                                onclick="handleAction(${book.id}, '${book.status}')">
                            ${book.status === 'available' ? 'Issue' : 'Return'}
                        </button>
                        <button class="btn btn-primary" onclick="viewDetails(${book.id})">Details</button>
                    </div>
                </div>
            `).join('');
        }

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const filtered = booksData.filter(book => 
                book.title.toLowerCase().includes(query) || 
                book.author.toLowerCase().includes(query) ||
                book.isbn.includes(query)
            );
            renderBooks(filtered);
        });

        // Book actions
        function handleAction(id, status) {
            alert(`${status === 'available' ? 'Issued' : 'Returned'} book ID: ${id}`);
            // In production: POST to UniShelf API
        }

        function viewDetails(id) {
            alert(`Book details for ID: ${id}`);
            // In production: Show modal with history
        }

        // Simple chart
        function drawChart() {
            const canvas = document.getElementById('activityChart');
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#fff';
            ctx.fillRect(50, 150, 20, -80);
            ctx.fillRect(80, 150, 20, -60);
            ctx.fillRect(110, 150, 20, -100);
            ctx.fillRect(140, 150, 20, -90);
            ctx.fillRect(170, 150, 20, -70);
        }

        // Initialize
        updateStats();
        renderBooks(booksData);
        drawChart();

        // Auto-refresh every 30 seconds
        setInterval(() => {
            updateStats();
            renderBooks(booksData);
        }, 30000);
    </script>
</body>
</html>
